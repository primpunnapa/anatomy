<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cranial Nerves Matching Game</title>
    <style>
        body {
            font-family: "Rubik", serif;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 0;
        }

        h1 {
            color: #0D9276;
            font-family: "Rubik", serif;
            margin: 20px;
        }

        #instructions {
            font-family: "Rubik", serif;
            background-color: #BBE2EC;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            max-width: 600px;
            margin-bottom: 20px;
            font-size: 20px;
            text-align: center;
        }

        #game-container {
            font-family: "Rubik", serif;
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 10px;
            margin: 20px;
        }
        #cranial-nerve {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cn {
            background-color: #f0f0f0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }

        #ans-box {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .label {
            font-family: "Rubik", serif;
            color: #ccc;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }

        #options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background-color: #f0f0f0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }

        .option:hover {
            background-color: #d0e0ff;
        }

        #result {
            margin-top: 20px;
            font-size: 18px;
        }

        #reveal-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: large;
        }

        #reveal-button:hover {
            background-color: #45a049;
        }

        .correct {
            font-family: "Rubik", serif;
            color: green;
            font-weight: bold;
            background-color: white;
        }

        #reset-btn {
            font-family: "Rubik", serif;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #F4D160;
            color: #1D5D9B;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: large;
        }

        #reset-button:hover {
            background-color: #F4D160;
        }

        #button-container {
            display: flex;
            justify-content: center; 
            gap: 10px;
            margin-top: 20px; 
        }

        button {
            padding: 10px 15px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        button:active {
            transform: scale(0.98);
        }

        #next {
            font-family: "Rubik", serif;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #F75A5A;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: large;
        }

        #next:hover {
            background-color: #F75A5A;
        }

        #timer, #stars {
            font-family: "Rubik", serif;
            font-size: 18px;
            margin-top: 5px;
            color: #333;
        }


    </style>

     <!-- Link to Google font -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900" rel="stylesheet">
 
</head>
<body>
    <h1>Type of Cranial Nerves Matching Game</h1>
    <div id="instructions">
        <p>Getting to know each cranial nerve’s type by playing a matching game.</p>
        <p>Just click a name box, then click its correct cranial nerve.</p>
        <p>Good luck!</p>
    </div>

    <div id="timer">⏱ Time: 0s</div>
    <div id="stars">⭐️⭐️⭐️</div>

    <div id="game-container">

        <div id="cranial-nerve">
            <!-- Options for matching -->
            <div class="cn"  >Accessory nerve</div>
            <div class="cn"  >Facial nerve</div>
            <div class="cn"  >Glossopharyngeal nerve</div>
            <div class="cn"  >Olfactory nerve</div>
            <div class="cn"  >Trochlear nerve</div>
            <div class="cn"  >Oculomotor nerve</div>
            <div class="cn"  >Hypoglossal nerve</div>
            <div class="cn"  >Optic nerve</div>
            <div class="cn"  >Trigeminal nerve</div>
            <div class="cn"  >Vestibulocochlear nerve</div>
            <div class="cn"  >Vagus nerve</div>
            <div class="cn"  >Abducens nerve</div>

        </div>

    
        <div id="ans-box">
            <!-- Example labels -->
            <div class="label" id="label-1" data-match= "option-2">type of cranial nerve</div>
            <div class="label" id="label-2" data-match= "option-3">type of cranial nerve</div>
            <div class="label" id="label-3" data-match= "option-3">type of cranial nerve</div>
            <div class="label" id="label-4" data-match= "option-1">type of cranial nerve</div>
            <div class="label" id="label-5" data-match= "option-2">type of cranial nerve</div>
            <div class="label" id="label-6" data-match= "option-2">type of cranial nerve</div>
            <div class="label" id="label-7" data-match= "option-2">type of cranial nerve</div>
            <div class="label" id="label-8" data-match= "option-1">type of cranial nerve</div>
            <div class="label" id="label-9" data-match= "option-3">type of cranial nerve</div>
            <div class="label" id="label-10" data-match= "option-1">type of cranial nerve</div> 
            <div class="label" id="label-11" data-match= "option-3">type of cranial nerve</div>
            <div class="label" id="label-12" data-match= "option-2">type of cranial nerve</div>
         </div>

         <div id="options">
            <!-- Options for matching -->
            <div class="option" draggable="true" id="option-1">Sensory</div>  
            <div class="option" draggable="true" id="option-2">Motor</div>
            <div class="option" draggable="true" id="option-3">Mixed</div>
        </div>
        
    </div>

    <div id="button-container">
        <button id="reveal-button" class="btn btn-primary">Answer</button>
        <button id="reset-btn" class="btn btn-danger">Reset</button>
        <a id="next" href="flashcard.html" class="btn btn-success">Next Game</a>
    </div>


    <script>
        let selectedOption = null;

        const options = document.querySelectorAll('.option');
        const labels = document.querySelectorAll('.label');
        const resetButton = document.getElementById('reset-btn');
        const revealButton = document.getElementById('reveal-button');

        options.forEach(option => {
            option.addEventListener('click', () => {
                // Highlight the selected option
                options.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedOption = option;
            });
        });

        function checkAllMatched() {
            const allMatched = Array.from(labels).every(label => label.classList.contains('correct'));
            if (allMatched && gameStarted) {
                const finalTime = stopTimer();
                updateStars(finalTime);
            }
        }


        labels.forEach(label => {
            label.addEventListener('click', () => {
                if (!gameStarted) startTimer();

                if (selectedOption) {
                    const matches = label.dataset.match.split(',').map(item => item.trim());

                    if (matches.includes(selectedOption.id)) {
                        label.textContent = selectedOption.textContent;
                        label.classList.add('correct');
                        selectedOption.classList.remove('selected');

                        checkAllMatched(); // ✅ ตรวจจบเกม
                    } else {
                        alert('Incorrect match. Try again!');
                    }
                } else {
                    alert('Please select an option first.');
                }
            });
        });


        revealButton.addEventListener('click', () => {
            labels.forEach(label => {
                const matches = label.dataset.match.split(',').map(item => item.trim());
                const correctOption = matches.find(matchId => {
                    const option = document.getElementById(matchId);
                    return option;
                });

                if (correctOption) {
                    const optionElement = document.getElementById(correctOption);
                    label.textContent = optionElement.textContent;
                    label.classList.add('correct');
                }
            });

            if (gameStarted) {
                const finalTime = stopTimer();
                updateStars(finalTime);
            }
        });

        resetButton.addEventListener('click', () => {
            labels.forEach(label => {
                label.textContent = 'type of cranial nerve';
                label.classList.remove('correct');
            });

            options.forEach(option => {
                option.classList.remove('selected');
            });

            selectedOption = null;

            clearInterval(timerInterval);
            document.getElementById('timer').textContent = "⏱ Time: 0s";
            document.getElementById('stars').textContent = "⭐️⭐️⭐️";
            timeElapsed = 0;
            gameStarted = false;
        });


        let timerInterval;
        let timeElapsed = 0;
        let gameStarted = false;

        function startTimer() {
            timeElapsed = 0;
            gameStarted = true;
            timerInterval = setInterval(() => {
                timeElapsed++;
                document.getElementById('timer').textContent = `⏱ Time: ${timeElapsed}s`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            gameStarted = false;
            return timeElapsed;
        }

        function updateStars(seconds) {
            let stars = "⭐️⭐️⭐️";
            if (seconds > 45) {
                stars = "⭐️";
            } else if (seconds > 30) {
                stars = "⭐️⭐️";
            }
            document.getElementById('stars').textContent = stars;
        }

    </script>
</body>
</html>